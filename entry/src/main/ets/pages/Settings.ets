import router from '@ohos.router';
import common from '@ohos.app.ability.common';
import { storage } from '../utils/Storage';
import promptAction from '@ohos.promptAction';
import { ThemePreset } from '../utils/Types';
import { CUSTOM_THEME_ID, DEFAULT_THEME_ID, ThemeColorKey, cloneThemePreset, cloneThemePresets, createDefaultCustomTheme, getThemeById, getThemeColorValue } from '../utils/Theme';

interface ThemeColorField {
  key: ThemeColorKey;
  label: string;
  description: string;
}

const THEME_COLOR_FIELDS: ThemeColorField[] = [
  { key: 'backgroundColor', label: 'ËÉåÊôØÈ¢úËâ≤', description: 'È°µÈù¢Êï¥‰ΩìËÉåÊôØ' },
  { key: 'cardColor', label: 'Âç°ÁâáÈ¢úËâ≤', description: 'Âç°ÁâáÂíåÂÆπÂô®ËÉåÊôØ' },
  { key: 'textColor', label: '‰∏ªÊñáÊú¨È¢úËâ≤', description: 'Ê†áÈ¢òÂíåÊ≠£ÊñáÊñáÂ≠ó' },
  { key: 'accentColor', label: 'Âº∫Ë∞ÉÈ¢úËâ≤', description: 'ÊåâÈíÆÂíåÈ´ò‰∫ÆÂÖÉÁ¥†' },
  { key: 'mutedTextColor', label: 'Ê¨°Á∫ßÊñáÊú¨È¢úËâ≤', description: 'ËØ¥ÊòéÊñáÂ≠ó‰∏éÊ†áÁ≠æ' }
];

@Entry
@Component
struct Settings {
  @State themePresets: ThemePreset[] = cloneThemePresets();
  @State selectedThemeId: string = DEFAULT_THEME_ID;
  @State showThemeSelector: boolean = false;
  @State customTheme: ThemePreset = createDefaultCustomTheme();
  @State customThemeDraft: ThemePreset = createDefaultCustomTheme();
  @State showCustomThemeEditor: boolean = false;
  @State isSavingCustomTheme: boolean = false;

  getCurrentTheme(): ThemePreset {
    return getThemeById(this.selectedThemeId, this.themePresets);
  }

  getThemeColor(key: ThemeColorKey): string {
    return getThemeColorValue(this.getCurrentTheme(), key);
  }

  refreshThemeList(customTheme?: ThemePreset) {
    const presets = cloneThemePresets();
    if (customTheme) {
      presets.push(cloneThemePreset(customTheme));
    }
    this.themePresets = presets;
  }

  getColorFromPreset(theme: ThemePreset, key: ThemeColorKey): string {
    switch (key) {
      case 'cardColor':
        return theme.cardColor;
      case 'textColor':
        return theme.textColor;
      case 'accentColor':
        return theme.accentColor;
      case 'mutedTextColor':
        return theme.mutedTextColor;
      case 'backgroundColor':
      default:
        return theme.backgroundColor;
    }
  }

  updateCustomThemeDraftColor(key: ThemeColorKey, value: string) {
    const trimmed = value.trim();
    const updated: ThemePreset = {
      id: this.customThemeDraft.id,
      name: this.customThemeDraft.name,
      backgroundColor: key === 'backgroundColor' ? trimmed : this.customThemeDraft.backgroundColor,
      cardColor: key === 'cardColor' ? trimmed : this.customThemeDraft.cardColor,
      textColor: key === 'textColor' ? trimmed : this.customThemeDraft.textColor,
      accentColor: key === 'accentColor' ? trimmed : this.customThemeDraft.accentColor,
      mutedTextColor: key === 'mutedTextColor' ? trimmed : this.customThemeDraft.mutedTextColor
    };
    this.customThemeDraft = updated;
  }

  isValidHexColor(value: string): boolean {
    const regex = /^#?[0-9A-Fa-f]{6}$|^#?[0-9A-Fa-f]{3}$/;
    if (value.length === 0) {
      return false;
    }
    return regex.test(value.trim());
  }

  normalizeHexColor(value: string): string {
    let color = value.trim();
    if (!color.startsWith('#')) {
      color = `#${color}`;
    }
    return color.toUpperCase();
  }

  toggleCustomThemeEditor() {
    if (!this.showCustomThemeEditor) {
      this.customThemeDraft = cloneThemePreset(this.customTheme);
    }
    this.showCustomThemeEditor = !this.showCustomThemeEditor;
  }

  async saveCustomThemeChanges() {
    if (this.isSavingCustomTheme) {
      return;
    }
    const draft = this.customThemeDraft;
    const colors: ThemeColorKey[] = ['backgroundColor', 'cardColor', 'textColor', 'accentColor', 'mutedTextColor'];
    for (let i = 0; i < colors.length; i++) {
      const key = colors[i];
      const raw = this.getColorFromPreset(draft, key);
      if (!this.isValidHexColor(raw)) {
        promptAction.showToast({
          message: `${this.getFieldLabel(key)}Ê†ºÂºè‰∏çÊ≠£Á°ÆÔºåËØ∑ËæìÂÖ•Â¶Ç #FFFFFF`,
          duration: 2000
        });
        return;
      }
    }

    this.isSavingCustomTheme = true;
    const normalizedTheme: ThemePreset = {
      id: CUSTOM_THEME_ID,
      name: 'Ëá™ÂÆö‰πâ‰∏ªÈ¢ò',
      backgroundColor: this.normalizeHexColor(draft.backgroundColor),
      cardColor: this.normalizeHexColor(draft.cardColor),
      textColor: this.normalizeHexColor(draft.textColor),
      accentColor: this.normalizeHexColor(draft.accentColor),
      mutedTextColor: this.normalizeHexColor(draft.mutedTextColor)
    };

    this.customTheme = normalizedTheme;
    this.refreshThemeList(normalizedTheme);

    try {
      await storage.saveCustomThemePreset(normalizedTheme);
      await this.selectTheme(CUSTOM_THEME_ID);
      this.showCustomThemeEditor = false;
      promptAction.showToast({
        message: 'Ëá™ÂÆö‰πâ‰∏ªÈ¢òÂ∑≤‰øùÂ≠òÂπ∂Â∫îÁî®',
        duration: 1500
      });
    } catch (error) {
      promptAction.showToast({
        message: '‰øùÂ≠òËá™ÂÆö‰πâ‰∏ªÈ¢òÂ§±Ë¥•',
        duration: 2000
      });
    } finally {
      this.isSavingCustomTheme = false;
    }
  }

  getFieldLabel(key: ThemeColorKey): string {
    const field = THEME_COLOR_FIELDS.find((item: ThemeColorField) => item.key === key);
    return field ? field.label : 'È¢úËâ≤';
  }

  async aboutToAppear() {
    const context = getContext(this) as common.UIAbilityContext;
    await storage.init(context);
    const savedCustomTheme = await storage.getCustomThemePreset();
    if (savedCustomTheme) {
      this.customTheme = cloneThemePreset(savedCustomTheme);
    } else {
      this.customTheme = createDefaultCustomTheme();
    }
    this.customThemeDraft = cloneThemePreset(this.customTheme);
    this.refreshThemeList(this.customTheme);

    const savedThemeId = await storage.getThemePreference();
    if (savedThemeId) {
      const exists = this.themePresets.some((theme: ThemePreset) => theme.id === savedThemeId);
      this.selectedThemeId = exists ? savedThemeId : DEFAULT_THEME_ID;
    }
  }

  async selectTheme(themeId: string) {
    this.selectedThemeId = themeId;
    await storage.saveThemePreference(themeId);
    const themeName = this.themePresets.find((theme: ThemePreset) => theme.id === themeId)?.name || '';
    promptAction.showToast({
      message: `Â∑≤ÂàáÊç¢‰∏ªÈ¢òÔºö${themeName}`,
      duration: 1500
    });
    this.showThemeSelector = false;
  }

  toggleThemeSelector() {
    this.showThemeSelector = !this.showThemeSelector;
  }

  async exportData() {
    try {
      const data = await storage.exportAllData();
      promptAction.showDialog({
        title: 'Êï∞ÊçÆÂØºÂá∫',
        message: `Êï∞ÊçÆÂ∑≤ÂØºÂá∫ÔºåÂÖ±${data.length}Â≠óÁ¨¶\n\nÊï∞ÊçÆÂ∑≤Â§çÂà∂Âà∞ÊéßÂà∂Âè∞ÔºåÂèØÂú®ÂºÄÂèëËÄÖÂ∑•ÂÖ∑‰∏≠Êü•Áúã`,
        buttons: [{ text: 'Á°ÆÂÆö', color: '#007AFF' }]
      });
      console.log('=== ÂØºÂá∫Êï∞ÊçÆÂºÄÂßã ===');
      console.log(data);
      console.log('=== ÂØºÂá∫Êï∞ÊçÆÁªìÊùü ===');
    } catch (error) {
      promptAction.showToast({
        message: 'ÂØºÂá∫Â§±Ë¥•',
        duration: 2000
      });
    }
  }

  async clearAllData() {
    promptAction.showDialog({
      title: 'Âç±Èô©Êìç‰Ωú',
      message: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ',
      buttons: [
        { text: 'ÂèñÊ∂à', color: '#666666' },
        { text: 'Ê∏ÖÁ©∫', color: '#FF3B30' }
      ]
    }).then((result) => {
      if (result.index === 1) {
        storage.clearAllData().then(() => {
          promptAction.showToast({
            message: 'Êï∞ÊçÆÂ∑≤Ê∏ÖÁ©∫',
            duration: 2000
          });
        }).catch((err: Error) => {
          promptAction.showToast({
            message: 'Ê∏ÖÁ©∫Â§±Ë¥•',
            duration: 2000
          });
        });
      }
    }).catch((err: Error) => {
      console.error(`Ê∏ÖÁ©∫Êï∞ÊçÆÂØπËØùÊ°ÜÈîôËØØ: ${err}`);
    });
  }

  build() {
    Column() {
      // È°∂ÈÉ®ÂØºËà™Ê†è
      Row() {
        Image($r('app.media.ic_backup'))
          .width(28)
          .height(28)
          .padding(4)
          .margin({ right: 12 })
          .onClick(() => {
            router.back();
          })
        Text('ÂÖ≥‰∫éÊàë‰ª¨')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
          .fontColor(this.getThemeColor('textColor'))
        Blank()
      }
      .width('100%')
      .height(56)
      .padding({ left: 20, right: 20, top: 8, bottom: 8 })
      .backgroundColor(this.getThemeColor('backgroundColor'))

      Divider().strokeWidth(0.5).color('#E5E5EA')

      Scroll() {
        Column({ space: 16 }) {
          // Êï∞ÊçÆÁÆ°ÁêÜÊ†áÈ¢ò
          Text('Êï∞ÊçÆÁÆ°ÁêÜ')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor(this.getThemeColor('textColor'))
            .width('100%')
            .margin({ bottom: 8 })

          // Êï∞ÊçÆÁªüËÆ°
          Row() {
            Text('üìä Êï∞ÊçÆÁªüËÆ°')
              .fontSize(16)
              .fontColor(this.getThemeColor('textColor'))
            Blank()
            Image($r('app.media.ic_right'))
              .width(20)
              .height(20)
              .fillColor('#666666')
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })
          .onClick(() => {
            router.pushUrl({ url: 'pages/Statistics' });
          })

          // ÂØºÂá∫Êï∞ÊçÆ
          Row() {
            Text('üì§ ÂØºÂá∫Êï∞ÊçÆ')
              .fontSize(16)
              .fontColor(this.getThemeColor('textColor'))
            Blank()
            Image($r('app.media.ic_right'))
              .width(20)
              .height(20)
              .fillColor('#666666')
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })
          .onClick(() => {
            this.exportData();
          })

          // Ê∏ÖÁ©∫Êï∞ÊçÆ
          Row() {
            Text('üóëÔ∏è Ê∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆ')
              .fontSize(16)
              .fontColor('#FF3B30')
            Blank()
            Image($r('app.media.ic_right'))
              .width(20)
              .height(20)
              .fillColor('#FF3B30')
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })
          .onClick(() => {
            this.clearAllData();
          })

          Divider()
            .strokeWidth(0.5)
            .color('#E5E5EA')
            .margin({ top: 16, bottom: 16 })

          // ‰∏ªÈ¢òÈ£éÊ†º
          Text('‰∏ªÈ¢òÈ£éÊ†º')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor(this.getThemeColor('textColor'))
            .width('100%')
            .margin({ bottom: 8 })

          Row() {
            Column({ space: 4 }) {
              Text('ÂΩìÂâç‰∏ªÈ¢ò')
                .fontSize(14)
                .fontColor(this.getThemeColor('mutedTextColor'))
              Text(this.themePresets.find((theme: ThemePreset) => theme.id === this.selectedThemeId)?.name || 'ÈªòËÆ§')
                .fontSize(16)
                .fontColor(this.getThemeColor('textColor'))
                .fontWeight(FontWeight.Medium)
            }
            Blank()
            Image($r('app.media.ic_backup2'))
              .width(20)
              .height(20)
              .fillColor('#666666')
              .rotate({ angle: this.showThemeSelector ? 90 : 0 })
          }
          .width('100%')
          .height(72)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })
          .onClick(() => {
            this.toggleThemeSelector();
          })

          if (this.showThemeSelector) {
            Column({ space: 12 }) {
              ForEach(this.themePresets, (theme: ThemePreset) => {
                Row() {
                  Column({ space: 6 }) {
                    Text(theme.name)
                      .fontSize(16)
                      .fontColor(this.getThemeColor('textColor'))
                      .fontWeight(FontWeight.Medium)
                    Row({ space: 8 }) {
                      Text(`ËÉåÊôØ ${theme.backgroundColor}`)
                        .fontSize(12)
                        .fontColor(this.getThemeColor('mutedTextColor'))
                      Text(`Âº∫Ë∞É ${theme.accentColor}`)
                        .fontSize(12)
                        .fontColor(this.getThemeColor('mutedTextColor'))
                    }
                  }
                  Blank()
                  if (this.selectedThemeId === theme.id) {
                    Text('‚úì')
                      .fontSize(18)
                      .fontColor(theme.accentColor)
                  } else {
                    Row()
                      .width(18)
                      .height(18)
                      .borderRadius(9)
                      .border({ width: 1, color: '#E5E7EB' })
                      .backgroundColor(this.getThemeColor('cardColor'))
                  }
                }
                .width('100%')
                .height(72)
                .padding({ left: 20, right: 20 })
                .borderRadius(12)
                .backgroundColor(this.getThemeColor('cardColor'))
                .border({
                  width: 1,
                  color: this.selectedThemeId === theme.id ? theme.accentColor : '#F1F5F9'
                })
                .onClick(() => {
                  this.selectTheme(theme.id);
                })
              }, (theme: ThemePreset) => theme.id)
            }
            .width('100%')
            .padding({ top: 12, bottom: 4 })
          }

          Column({ space: 12 }) {
            Row() {
              Column({ space: 4 }) {
                Text('Ëá™ÂÆö‰πâ‰∏ªÈ¢ò')
                  .fontSize(18)
                  .fontWeight(FontWeight.Bold)
                  .fontColor(this.getThemeColor('textColor'))
                Text('ËÆæÁΩÆÂ±û‰∫é‰Ω†ÁöÑÈ¢úËâ≤ÁªÑÂêà')
                  .fontSize(13)
                  .fontColor(this.getThemeColor('mutedTextColor'))
              }
              Blank()
              Button(this.showCustomThemeEditor ? 'ÂÖ≥Èó≠ÁºñËæë' : 'ÁºñËæëÈ¢úËâ≤')
                .fontSize(14)
                .height(34)
                .padding({ left: 16, right: 16 })
                .borderRadius(17)
                .fontColor('#FFFFFF')
                .backgroundColor(this.getThemeColor('accentColor'))
                .onClick(() => {
                  this.toggleCustomThemeEditor();
                })
              Button('Â∫îÁî®‰∏ªÈ¢ò')
                .fontSize(14)
                .height(34)
                .padding({ left: 16, right: 16 })
                .borderRadius(17)
                .fontColor('#FFFFFF')
                .backgroundColor(this.getThemeColor('accentColor'))
                .onClick(() => {
                  this.selectTheme(CUSTOM_THEME_ID);
                })
            }
            .width('100%')

            Row({ space: 12 }) {
              ForEach(THEME_COLOR_FIELDS, (field: ThemeColorField) => {
                Column({ space: 6 }) {
                  Text(field.label)
                    .fontSize(12)
                    .fontColor(this.getThemeColor('mutedTextColor'))
                  Row()
                    .width(44)
                    .height(44)
                    .borderRadius(12)
                    .backgroundColor(this.getColorFromPreset(this.customTheme, field.key))
                    .border({ width: 1, color: '#E5E7EB' })
                }
              }, (field: ThemeColorField) => field.key)
            }
            .width('100%')
          }
          .width('100%')
          .padding({ left: 20, right: 20, top: 16, bottom: 16 })
          .borderRadius(16)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 3,
            color: '#0000000A',
            offsetX: 0,
            offsetY: 2
          })

          if (this.showCustomThemeEditor) {
            Column({ space: 16 }) {
              ForEach(THEME_COLOR_FIELDS, (field: ThemeColorField) => {
                Column({ space: 6 }) {
                  Text(field.label)
                    .fontSize(14)
                    .fontWeight(FontWeight.Medium)
                    .fontColor(this.getThemeColor('textColor'))
                  Row({ space: 12 }) {
                    TextInput({
                      placeholder: '#FFFFFF',
                      text: this.getColorFromPreset(this.customThemeDraft, field.key)
                    })
                      .width('70%')
                      .height(40)
                      .borderRadius(10)
                      .fontSize(14)
                      .padding({ left: 12, right: 12 })
                      .backgroundColor(this.getThemeColor('cardColor'))
                      .border({
                        width: 1,
                        color: this.isValidHexColor(this.getColorFromPreset(this.customThemeDraft, field.key)) ? '#E5E7EB' : '#F87171'
                      })
                      .onChange((value: string) => {
                        this.updateCustomThemeDraftColor(field.key, value);
                      })

                    Row()
                      .width(44)
                      .height(44)
                      .borderRadius(12)
                      .backgroundColor(this.getColorFromPreset(this.customThemeDraft, field.key))
                      .border({ width: 1, color: '#E5E7EB' })
                  }
                  Text(field.description)
                    .fontSize(12)
                    .fontColor(this.getThemeColor('mutedTextColor'))
                }
                .width('100%')
              }, (field: ThemeColorField) => field.key)

              Row({ space: 12 }) {
                Button('ÂèñÊ∂à')
                  .layoutWeight(1)
                  .height(44)
                  .borderRadius(22)
                  .fontSize(15)
                  .fontColor(this.getThemeColor('textColor'))
                  .backgroundColor(this.getThemeColor('cardColor'))
                  .border({ width: 1, color: '#E5E7EB' })
                  .onClick(() => {
                    this.toggleCustomThemeEditor();
                  })
                Button(this.isSavingCustomTheme ? '‰øùÂ≠ò‰∏≠‚Ä¶' : '‰øùÂ≠òÂπ∂Â∫îÁî®')
                  .layoutWeight(1)
                  .height(44)
                  .borderRadius(22)
                  .fontSize(15)
                  .fontColor('#FFFFFF')
                  .backgroundColor(this.getThemeColor('accentColor'))
                  .onClick(() => {
                    this.saveCustomThemeChanges();
                  })
                  .enabled(!this.isSavingCustomTheme)
              }
            }
            .width('100%')
            .padding({ left: 20, right: 20, top: 16, bottom: 16 })
            .borderRadius(16)
            .backgroundColor(this.getThemeColor('cardColor'))
            .shadow({
              radius: 4,
              color: '#00000012',
              offsetX: 0,
              offsetY: 2
            })
          }

          Divider()
            .strokeWidth(0.5)
            .color('#E5E5EA')
            .margin({ top: 16, bottom: 16 })

          // ÂÖ≥‰∫éÊ†áÈ¢ò
          Text('ÂÖ≥‰∫éÂ∫îÁî®')
            .fontSize(18)
            .fontWeight(FontWeight.Bold)
            .fontColor(this.getThemeColor('textColor'))
            .width('100%')
            .margin({ bottom: 8 })

          // ÁâàÊú¨Âè∑
          Row() {
            Text('ÁâàÊú¨Âè∑')
              .fontSize(16)
              .fontColor(this.getThemeColor('textColor'))
            Blank()
            Text('V1.0.0')
              .fontSize(16)
              .fontColor(this.getThemeColor('mutedTextColor'))
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })

          // ÂºÄÂèëËÄÖ
          Row() {
            Text('ÂºÄÂèëËÄÖ')
              .fontSize(16)
              .fontColor(this.getThemeColor('textColor'))
            Blank()
            Text('TsangHaotian')
              .fontSize(16)
              .fontColor(this.getThemeColor('mutedTextColor'))
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })

          // ËÅîÁ≥ªÈÇÆÁÆ±
          Row() {
            Text('ËÅîÁ≥ªÈÇÆÁÆ±')
              .fontSize(16)
              .fontColor(this.getThemeColor('textColor'))
            Blank()
            Text('TsangHaotian@hotmail.com')
              .fontSize(12)
              .fontColor(this.getThemeColor('mutedTextColor'))
              .maxLines(1)
              .textOverflow({ overflow: TextOverflow.Ellipsis })
              .constraintSize({ maxWidth: '60%' })
          }
          .width('100%')
          .height(56)
          .padding({ left: 20, right: 20 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })

          // È°πÁõÆÂºÄÊ∫êÂú∞ÂùÄ
          Column({ space: 8 }) {
          Row() {
            Text('È°πÁõÆÂºÄÊ∫êÂú∞ÂùÄ')
                .fontSize(16)
                .fontColor(this.getThemeColor('textColor'))
            Blank()
            }
            .width('100%')
            Text('https://github.com/TsangHaotian/Harmony_EyesNote')
              .fontSize(14)
              .fontColor(this.getThemeColor('accentColor'))
              .width('100%')
              .maxLines(2)
              .textOverflow({ overflow: TextOverflow.Ellipsis })
          }
          .width('100%')
          .padding({ left: 20, right: 20, top: 16, bottom: 16 })
          .borderRadius(12)
          .backgroundColor(this.getThemeColor('cardColor'))
          .shadow({
            radius: 2,
            color: '#00000006',
            offsetX: 0,
            offsetY: 1
          })

        }
        .width('100%')
        .padding({ top: 24, left: 20, right: 20, bottom: 24 })
      }
      .layoutWeight(1)
      .width('100%')
    }
    .width('100%')
    .height('100%')
      .backgroundColor(this.getThemeColor('backgroundColor'))
  }
}